# Log Consumable

- A log is instant record of an activity.
- A log follows structure(UUID,log,time,date) while creating a log.
- A log is immutable(cannot make changes after creating).
- There is a log encoder and decoder which follows the structure.
- If a log is created then the log encoder encodes and provides to storage service.
- When a logs are fetched from the storage service, using log decoder it is decoded to the log structure.  The structure checks the log while decoding.  if it doesn't follows the structure then it is destroyed.

# Device Token

- If a user wants to share their logs to others then it can be shared by providing device token.
- The storage service syncs the logs to the file service in the cloud with the device token.
- If the sync network failed, then it is updated in next successful network connection.
- A deep link is generated by deep link generator which is in the storage service. The deep link can be shared to the other users to access the log.
- When the deep link is accessed.  The storage service first checks the device token whether it is valid.  If the device token is valid then it fetches the logs from the file service in the cloud(while accessing network failure occurs at that time the fetching is paused and continued after successful conncetion).
- If the user rejects the access then the fetching process is terminated.
- After successful fetching the storage service saves the logs to the device disk.
- If any changes made by the owner of the logs then another deeplink is generated and it should be shared.  The old deeplink shared is expired and cannot be used.

# Conversation Threads

- There is a service called external communication and execution service(shortly called as ECE), which handles the the handshake between our application and other service like siri, shortcuts spotlight search etc.
- The ECE is a singleton, so it has access all over the application environment.
- The service like Siri / shortcuts communicates with the ECE.
- The ECE gets intent ID and it's parameter from the service like siri / shortcut.
- The ECE checks the intent ID in intent dictionary.
- If the intent ID is available, then it checks the intent provides parameter, whether the intent is dependant to another intent.  Next it executes the fuction.
- else, the ECE informs the issue to the external services.
- The intent dictionary has information about intent ID with what functionality should be executed, whether the intent has parameter or not and whether the intent is dependent to other intent.
- The ECE has a intent state variable which tracks the intent.  The intent state variable is used to check the intent state while switching from one state to another.
